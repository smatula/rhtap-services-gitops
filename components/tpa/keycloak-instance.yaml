apiVersion: k8s.keycloak.org/v2alpha1
kind: Keycloak
metadata:
  name: tpa-keycloak
  namespace: tpa-project
  annotations:
    argocd.argoproj.io/sync-wave: "5"
spec:
  instances: 1
  adminCredentials: { secretName: keycloak-admin-secret }
  db:
    vendor: postgres
    host: kc-postgres-primary.tpa-project.svc.cluster.local
    port: 5432
    database: keycloakdb
    
    usernameSecret: { name: kc-postgres-kcuser-secret, key: user }
    passwordSecret: { name: kc-postgres-kcuser-secret, key: password }
  
  hostname: 
    strict: true

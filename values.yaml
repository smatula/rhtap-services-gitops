---
artifactory:
  containerSecurityContext:
    enabled: false
  artifactory:
    podSecurityContext:
      enabled: false
    #   image:
    #     repository: releases-docker.jfrog.io/jfrog/artifactory-jcr
    #     version: 7.71.5
  nginx:
    enabled: false
  podSecurityContext:
    enabled: false
  containerSecurityContext:
    enabled: false

  postgresql:
    enabled: true
    auth:
      password: "a-strong-password"
    primary:
      podSecurityContext:
        enabled: false
      securityContext:
        enabled: false
      containerSecurityContext:
        enabled: false

  # Arrr! Configure the init containers resources as the chart expects
  initContainers:
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi

  # Arrr! Add our custom init container using extraInitContainers
  customInitContainers: |
    - name: setup-artifactory2
      image: "alpine/curl:3.14"
      command: ["/bin/sh", "-c", "/scripts/setup.sh"]
      volumeMounts:
        - name: setup-script
          mountPath: /scripts
        - name: admin-creds
          mountPath: /etc/artifactory-creds

  customVolumes:
    - name: setup-script
      configMap:
        name: artifactory-setup-script
        defaultMode: 0755
    - name: admin-creds
      secret:
        secretName: artifactory-admin-creds

